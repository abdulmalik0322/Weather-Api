<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API</title>
</head>
<style>
    *{
        margin: 0px;
        padding: 0px;
    }
    body{
        display: flex;
        align-items: center;
        justify-content: center;
        /* background-color: lightblue; */
        background: linear-gradient(to right, rgb(236, 191, 191), lightblue, rgb(236, 191, 191));
        flex-direction: column;
        min-height: 100vh;
        font-family: Arial, Helvetica, sans-serif;
    }
    .main-container{
        display: flex;
        height: 100%;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }
    .weather-container{
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .weather-container input{
        padding: 10px 3px;
        width: 76%;
        margin: 10px 0px;
        background-color: transparent;
        border: 2px solid gray;
        border-radius: 5px;
        cursor: pointer;
        outline: none;
        font-size: 16px;
        margin-top: 22px;
    }
    .weather-container button{
        padding: 10px;
        background-color: transparent;
        cursor: pointer;
        border: 2px solid gray;
        width: 50%;
        border-radius: 5px;
        font-size: 17px;
    }
    .weatherDiv{
        width: 400px;
        height: 280px;
        background-color: wheat;
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        transition: all 1s ease-in;
        border-radius: 5px;
    }
    .weatherDiv h4{
        margin-top: 8px;
    }
    .weatherDiv p{
        margin-top: 8px;
    }

    
    #spinner {
      margin-top: 25px;
      display: none;
    }

    /* üîµ Dual-Ring Spinner */
    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid transparent;
      border-top: 4px solid #007bff;
      border-right: 4px solid #007bff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto;
      position: relative;
    }

    .spinner::before {
      content: "";
      width: 30px;
      height: 30px;
      border: 4px solid transparent;
      border-left: 4px solid #00c6ff;
      border-bottom: 4px solid #00c6ff;
      border-radius: 50%;
      position: absolute;
      top: 7px;
      left: 7px;
      animation: spinReverse 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes spinReverse {
      to { transform: rotate(-360deg); }
    }
</style>
<body>
    <div class="main-container">
    <h2 style="margin-bottom: 10px;">üå§Ô∏è API Of Weather APP</h2>
    <h4>Check Todays Weather</h4>
    <div class="weather-container">
            <input type="text" name="text" id="searchInput" placeholder="Enter city name">
            <br>
            <button id="get-weather">Get Weather</button>
            <!-- Spinner -->

        <div id="spinner">
            <div class="spinner"></div>
        </div>

            <div class="weatherDiv"></div>
    </div>
</div>

    <script>
        const api = "08dc34a6557f84f8cacede6f9e68b428";
        const weatherDiv = document.querySelector(".weatherDiv");
        const btn = document.querySelector("#get-weather");
        const spinner = document.getElementById("spinner");
        btn.addEventListener("click", async () => {
            const city = document.querySelector("#searchInput").value.trim();
            
            if(city === ""){
                weatherDiv.innerHTML = `<p>Pleas Enter City Name</p>`;
            }

            weatherDiv.innerHTML = "";         
            spinner.style.display = "block";

            const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${api}&units=metric`;
            try{
                const key = await fetch(url);
                const data = await key.json();
                
                if(data.cod === "404"){
                    weatherDiv.innerHTML = "City not found";
                    return;
                }
                else{
                const {name, sys, main, weather} = data;
                weatherDiv.innerHTML = `
                <h2>${name}, ${sys.country}</h2>
                <p>üìçüõ° <b>tempreture</b> ${main.temp}</p>
                <p>üìç<b>Feels Like</b> ${main.feels_like}</p>
                <p>üìç<b>Humidity</b> ${main.humidity}</p>
                <p>${weather[0].main} - ${weather[0].description}</p>
                <img src="https://openweathermap.org/img/wn/${weather[0].icon}@2x.png" alt="Weather Icon" />
                `
                }
            }
            catch (error){
                weatherDiv.innerHTML = `
                <p>something went wrong</p>
                `;
                console.error(error)
            }
            finally {
            spinner.style.display = "none";
      }
        })
    </script>
</body>
</html>